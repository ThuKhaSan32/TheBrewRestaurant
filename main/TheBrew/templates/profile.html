{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container-fluid bg-warning text-white p-5 mt-3">
        <h1>The Brew</h1>
        <h3>Your Favourite place for foods and drinks</h3>
    </div>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
        <ul class="navbar-nav">
        <li class="nav-item px-3">
            <a class="nav-link active" href="{% url 'home' %}">Home</a>
        </li>
        <li class="nav-item px-3">
            <a class="nav link" id="promo_btn" style="color: lightgray; text-decoration: none; margin-top: 8px;" >Promotions</a>
        </li>
        <li class="nav-item px-3">
            <a class="nav-link" style="color: lightgray;" id="menu-tab" href="{% url 'menu' %}" >Menus</a>
        </li>
        <li class="nav-item px-3">
            <a class="nav-link" style="color: lightgray;" href="{% url 'register' %}" id="register-tab">Register Account </a>
        </li>
        <li class="nav-item px-3">
            <a class="nav link" id="profile-btn" style="color: lightgray; text-decoration: none; margin-top: 8px;">Profile</a>
        </li>
        <li class="nav-item px-3">
            <a class="nav link" id="noti_btn" style="color: lightgray; text-decoration: none; margin-top: 8px;">Notifications</a>
        </li>
        </ul>
    </div>
    </nav>
        {% if data %}
            <div class="container mt-3 bg-secondary p-3" style="width:30%">
                <div class="bg-white center" >
                    <img src="{% static 'image/smile.png' %}" width="50%" height="300px" style="margin-left: 25%; padding:15px">
                </div>
                <h2 class="bg-warning text-center p-2" style="width:100%">{{ data.name.username }}</h2>
                <div class="card" style="width:100%">
                    <div class="card-body mx-auto my-auto">
                    <h4 class="card-title">Email: {{ data.name.email }} </h4>
                    <p class="card-text"><bold>
                        ID: {{ data.name.id }}<br>
                        Status: {{ data.status }}<br>
                        Points: {{ data.points }}<br>
                        Joined on: {{ data.created_at }}<br></bold>
                    </p>
                    <button class="text-dark" id="storage"> Purchase History</button><br></br>
                    <a class="text-dark" id="pr-btn" href="{% url 'point_request' %}"> Point request </a>
                    <br></br>
                    <button class="text-dark" id="logout-btn">Log Out</button>
                    <button class="text-dark" id="psw-btn">Password reset</button>
                    <a class="text-dark" id="rewards-btn" href="{% url 'rewards' %}">Reward Button</a>
                </div>
            </div>
        {% else %}
            <p>No profile found.</p>
        {% endif %}
        <script src="{% static 'csrf.js' %}"></script>
        <script src="{% static 'javascript.js' %}"></script>
        <script>
            const storage=document.getElementById("storage")
            const userId=localStorage.getItem('userId')

            storage.addEventListener('click', function(e){
                e.preventDefault

                window.location.href=`/storage/${userId}/`
            })
        </script>
</body>
</html>